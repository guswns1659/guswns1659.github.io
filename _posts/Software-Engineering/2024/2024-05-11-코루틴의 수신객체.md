---
title: 코루틴의 수신객체
date: 2024-05-11 11:49:08 +09:00
categories: [Software-Engineering]
tags: engineering
---

코루틴을 사용하다보면 수신객체라는 말이 등장한다. 처음에는 이해가 잘 안됐는데 사용하다보니 이해가 생겼다. 

```kotlin
fun <T> test(block: String.() -> T): T { 
  val result: T = block.invoke("수신객체")
  return result
}
```

위 함수는 String의 확장함수를 인자로 받는 고차함수다. 확장함수 이기에 내부에서는 해당 String의 인스턴스가 만들어져야 하는데, 이 인스턴스가 수신객체가 된다. 

```kotlin
public fun <T> runBlocking(context: CoroutineContext = EmptyCoroutineContext, block: suspend CoroutineScope.() -> T): T {
}
```

위 함수는 코루틴의 runBlocking 함수다. 이 함수는 CoroutineScope의 확장함수를 인자로 받는 고차 함수다. 내부에서 block을 호출할 때는 CoroutineScope을 인스턴스화해서 주입해줘야한다. 
runBlocking 내부에서는 BlockingCoroutine이라는 구현체가 인스턴스화돼서 주입된다. 

```kotlin
public fun CoroutineScope.launch(
    context: CoroutineContext = EmptyCoroutineContext,
    start: CoroutineStart = CoroutineStart.DEFAULT,
    block: suspend CoroutineScope.() -> Unit
): Job {
}
```

위 함수는 코루틴의 launch 함수다. 이 함수는 CoroutineScope의 확장함수이다. 또한 인자로 CoroutineScope의 확장함수를 받는 고차 함수다. 내부에서는 StandaloneCoroutine이 인스턴스화돼서 주입된다.
